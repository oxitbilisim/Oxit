@using Oxit.Domain.Models
@model Dictionary<string, object>
@{
    ViewData["Title"] = "Şirketler";
    List<HesapPlani> companies = (List<HesapPlani>)Model["companies"];
    int pageCount = (int)Model["pageCount"];
}

<table class="table table-striped table-hover">
  <thead>
  <tr>
    <th scope="col">Aktif</th>
    <th scope="col">Hesap Detayı</th>
    <th scope="col">Cari Kod</th>
    <th scope="col">Firma Adı</th>
  </tr>
  </thead>
  <tbody>
  @foreach (var b in companies)
  {
    <tr>
      <th scope="row">
        <input class="form-check-input companyStatus" id="flexCheckDefault" type="checkbox" @(b.Aktif == true ? "checked" : "") value="@Html.DisplayFor(modelItem => b.Id)">
      </th>
      <td>
        <a class="btn btn-sm btn-info" href="@Url.Action("index","Cari",new {hesapId=b.Id})">
          <i class="icon icon-2xl cil-menu"></i>
        </a>  
      </td>
      <td>@Html.DisplayFor(modelItem => b.Kod)</td>
      <td>@Html.DisplayFor(modelItem => b.Ad)</td>
      <td></td>
      <td></td>
    </tr>
  }
  </tbody>
</table>
<nav aria-label="Page navigation example">
  <ul class="pagination">
    <li class="page-item"><a class="page-link" href="#" aria-label="Previous"><span aria-hidden="true">«</span></a></li>
    @for (int i = 1; i<=pageCount;i++)
    {
      <li class="page-item"><a class="page-link" href="@Url.Action("Index","Companies",new {page = i})">@i</a></li>
    }
    <li class="page-item"><a class="page-link" href="#" aria-label="Next"><span aria-hidden="true">»</span></a></li>
  </ul>
</nav>
<script>
$(document).ready(function () {
  
        $('.companyStatus').change(function () {
          $.ajax({
            type: "post",
            url: "@Url.Action("saveStatus","Companies")",
            data: { companyId: $(this).val(), status:$(this).prop('checked')},
            dataType:"json",
            success: function(response){
              
            },
            error: function(response){
              
            }
          });
        });
        
    });
</script>